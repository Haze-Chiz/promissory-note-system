<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Active Course Setting - Admin</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        font-family: 'Arial', sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f9f9f9;
    }

    .sidebar {
        width: 220px;
        height: 100vh;
        background: linear-gradient(135deg, #1e2a78, #3a4bb3);
        color: #fff;
        position: fixed;
        top: 0;
        left: 0;
        padding-top: 20px;
        display: flex;
        flex-direction: column;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }

    .sidebar h2 {
        text-align: center;
        font-size: 16px;
        margin: 0 10px 30px;
        font-weight: 300;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .sidebar a {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: #fff;
        text-decoration: none;
        margin: 5px 0;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }

    .sidebar a.active { background-color: rgba(255, 255, 255, 0.25); font-weight: 600; }
    .sidebar a:hover { background-color: rgba(255, 255, 255, 0.1); }

    .sidebar img.icon {
        width: 30px;
        height: 30px;
        margin-right: 10px;
        background: #fff;
        border-radius: 50%;
        padding: 6px;
    }

    .logout-btn {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 12px 20px;
    }

    .main-content {
        margin-left: 220px;
        padding: 30px;
        min-height: 100vh;
    }

    .sidebar-toggle {
        display: none;
        position: fixed;
        top: 10px;
        left: 10px;
        background: #1e2a78;
        color: #fff;
        border: none;
        padding: 10px;
        border-radius: 5px;
        cursor: pointer;
        z-index: 1000;
    }

    @media (max-width: 768px) {
        .sidebar { transform: translateX(-100%); }
        .sidebar.open { transform: translateX(0); }
        .main-content { margin-left: 0; }
        .sidebar-toggle { display: block; }
    }

    .container {
        width: 90%;
        max-width: 700px;
        margin: 50px auto;
        background: #fff;
        padding: 35px 30px;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.1);
        text-align: center;
    }

    h1 {
        font-size: 26px;
        color: #1e2a78;
        margin-bottom: 30px;
        font-weight: 600;
    }

    label {
        display: block;
        margin-bottom: 10px;
        font-weight: 500;
        font-size: 15px;
        text-align: left;
    }

    input {
        width: 100%;
        padding: 14px 12px;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #ccc;
        margin-bottom: 20px;
        transition: border 0.3s ease, box-shadow 0.3s ease;
    }

    input:focus {
        border-color: #4b6cb7;
        box-shadow: 0 0 5px rgba(75,108,183,0.3);
        outline: none;
    }

    .btn {
        margin-top: 10px;
        padding: 14px 22px;
        background: #4b6cb7;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        transition: background 0.3s ease, transform 0.2s ease;
    }

    .btn:hover {
        background: #39549b;
        transform: translateY(-1px);
    }

    .info-box {
        background: #eef3ff;
        padding: 30px;
        border-left: 5px solid #4b6cb7;
        margin-top: 30px;
        border-radius: 8px;
        text-align: left;
        font-size: 16px;
        line-height: 1.8;
    }

    .flash-message {
        margin-bottom: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 15px;
        text-align: left;
    }

    .flash-success { background: #d4edda; color: #155724; border-left: 5px solid #28a745; }
    .flash-danger { background: #f8d7da; color: #721c24; border-left: 5px solid #dc3545; }
    .flash-warning { background: #fff3cd; color: #856404; border-left: 5px solid #ffc107; }
</style>

</head>

<body>

<button class="sidebar-toggle" onclick="toggleSidebar()">â˜° Menu</button>

<nav class="sidebar" id="sidebar">
    <h2>School Admin<br>Promissory Notes</h2>

    <a href="{{ url_for('admin.dashboard') }}" class="{% if request.endpoint == 'admin.dashboard' %}active{% endif %}">
        <img src="{{ url_for('static', filename='images/dashboard.png') }}" class="icon"> Dashboard
    </a>

    <a href="{{ url_for('admin.accounts') }}" class="{% if request.endpoint == 'admin.accounts' %}active{% endif %}">
        <img src="{{ url_for('static', filename='images/accounts.png') }}" class="icon"> Accounts
    </a>

    <a href="{{ url_for('admin.semester') }}" class="{% if request.endpoint == 'admin.semester' %}active{% endif %}">
        <img src="{{ url_for('static', filename='images/semester.png') }}" class="icon"> Semester
    </a>

    <a href="{{ url_for('admin.school_year') }}" class="{% if request.endpoint == 'admin.school_year' %}active{% endif %}">
        <img src="{{ url_for('static', filename='images/schoolyear.png') }}" class="icon"> School Year
    </a>

    <a href="{{ url_for('admin.course') }}" class="{% if request.endpoint == 'admin.course' %}active{% endif %}">
        <img src="{{ url_for('static', filename='images/course.png') }}" class="icon"> Active Course
    </a>

    <a href="{{ url_for('admin.logout') }}" class="logout-btn">
        <img src="{{ url_for('static', filename='images/logout.png') }}" class="icon"> Logout
    </a>
</nav>

<main class="main-content">

<div class="container">

    <h1>Manage Active Courses</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-message flash-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST">
        <label for="course_name">Add New Active Course</label>
        <input 
            type="text"
            id="course_name"
            name="course_name"
            placeholder="e.g., Bachelor of Science in Information Technology"
            required
        >
        <button class="btn" type="submit">Add Course</button>
    </form>

    <div class="info-box">
        <strong>Currently Active Courses:</strong>
        <p style="margin-bottom: 10px;">{{ active_courses | length }} course(s) active</p>

        <ul style="list-style-type: none; padding-left: 0;">
            {% for course in active_courses %}
            <li style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px dashed #ccc;">
                <span>{{ course.name }}</span>

                <form action="{{ url_for('admin.delete_course', course_id=course.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to remove this course?');">
                    <button type="submit" style="background: none; border: none; color: #dc3545; cursor: pointer; font-size: 14px;">
                        Remove
                    </button>
                </form>
            </li>
            {% else %}
            <li>No active courses defined.</li>
            {% endfor %}
        </ul>
    </div>

</div>

</main>

<script>
    function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("open");
    }
</script>

</body>
</html>
